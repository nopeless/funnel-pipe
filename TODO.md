Allow mapping of funnels

Allow pipes to be in pipe

Make tank, collector

Hash api